-- Create a real relationship between bookings.user_id profiles.id.
-- Needed so Supabase can auto-join and let us access the user's email.
-- ON DELETE CASCADE deletes all bookings if the user is removed.
ALTER TABLE public.bookings
DROP CONSTRAINT IF EXISTS bookings_user_id_fkey;

ALTER TABLE public.bookings
ADD CONSTRAINT bookings_user_id_fkey
FOREIGN KEY (user_id)
REFERENCES public.profiles(id)
ON DELETE CASCADE;
